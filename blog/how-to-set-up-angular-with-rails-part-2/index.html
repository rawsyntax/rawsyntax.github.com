
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>How to Set Up Angular with Rails Part 2 - Raw Syntax</title>
  <meta name="author" content="Eric Himmelreich">
  <link href="https://plus.google.com/101134845820398279714" rel="author">
  <meta name="Generator" content="Jekyll & Octopress (http://octopress.org)">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://rawsyntax.com/blog/how-to-set-up-angular-with-rails-part-2/">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/octopress.min.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/RawSyntax" rel="alternate" title="Raw Syntax" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-22677496-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  

   
  <link href="/octopress-favicon.png" rel="icon">
</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Raw Syntax</a></h1>
  
    <h2>The stuff programs are made of</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/RawSyntax" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:rawsyntax.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/archives">Archives</a></li>
  <li><a href="/blog/categories/learn-emacs">Emacs</a></li>
  <li><a href="/screencasts">Screencasts</a></li>
  <li><a href="/contact">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>











<article class="hentry " role="article">
  
  <header>
    <h1 class="entry-title">

How to Set Up Angular With Rails Part 2

</h1>

    
      <p class="meta">
        








  


<time datetime="2014-11-04T09:51:14-05:00" pubdate data-updated="true">Nov 4<span>th</span>, 2014</time>
         &bull; <a rel="bookmark" href="/blog/how-to-set-up-angular-with-rails-part-2/">Permalink</a>
      </p>
    
  </header>

<div class="entry-content"><p><em>originally posted on the Intridea blog here: <a href="http://www.intridea.com/blog/2014/10/14/how-to-set-up-angular-with-rails-part-2">http://www.intridea.com/blog/2014/10/14/how-to-set-up-angular-with-rails-part-2</a></em></p>

<p><img class="" src="/images/rails-angularjs.jpg"></p>

<p>In <a href="http://www.intridea.com/blog/2014/9/25/how-to-set-up-angular-with-rails">Part I</a> of our Angular series, we illustrated the process for setting up an Angular app for Rails.</p>

<p>In Part 2 of this series, we'll be creating a basic HR app. This app will allow us to view employee information through an Angular app (edits and updates to be explained in Part 3 of this series). For more details, see code in Github link at the end of post.</p>

<p>Here's a quick snapshot of what we'll be creating for our HR app:</p>

<ul>
<li>Setting up test frameworks</li>
<li>Creating a Rails API</li>
<li>Making the Angular frontend talk to the Rails API</li>
</ul>


<h2>Setup RSpec</h2>

<p>First, remove the <code>test/</code> directory. This is left over from our initial app setup in Part 1: How to Set Up Angular with Rails. Then add RSpec and factory_girl_rails to the Gemfile:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>group :development, :test do
</div><div class='line'>  gem 'rspec-rails', '~> 3.1.0'
</div><div class='line'>end
</div><div class='line'> </div><div class='line'>group :test do
</div><div class='line'>  gem 'database_cleaner'
</div><div class='line'>  gem 'factory_girl_rails'
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<p>Next, bundle and install it.</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>bundle install
</div><div class='line'>rails generate rspec:install</div></pre></td></tr></table></div></figure></p>

<p>And edit your spec/spec_helper.rb to match:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div><div data-line='12' class='line-number'></div><div data-line='13' class='line-number'></div><div data-line='14' class='line-number'></div><div data-line='15' class='line-number'></div><div data-line='16' class='line-number'></div><div data-line='17' class='line-number'></div><div data-line='18' class='line-number'></div><div data-line='19' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>ENV["RAILS_ENV"] ||= 'test'
</div><div class='line'>require File.expand_path("../../config/environment", <strong>FILE</strong>)
</div><div class='line'>require 'rspec/rails'
</div><div class='line'>require 'rspec/autorun'
</div><div class='line'>require 'database_cleaner'
</div><div class='line'> </div><div class='line'>ActiveRecord::Migration.check_pending! if defined?(ActiveRecord::Migration)
</div><div class='line'>RSpec.configure do |config|
</div><div class='line'>  config.include FactoryGirl::Syntax::Methods
</div><div class='line'>  config.infer_spec_type_from_file_location!
</div><div class='line'> </div><div class='line'>  config.expect_with :rspec do |expectations|
</div><div class='line'>    expectations.include_chain_clauses_in_custom_matcher_descriptions = true
</div><div class='line'>  end
</div><div class='line'> </div><div class='line'>  config.mock_with :rspec do |mocks|
</div><div class='line'>    mocks.verify_partial_doubles = true
</div><div class='line'>  end
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<h2>Create the Employee Model</h2>

<p>Let's create the Employee model with a few fields:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>bundle exec rails generate model Employee name:string email:string ssn:string salary:integer
</div><div class='line'>bundle exec rake db:migrate</div></pre></td></tr></table></div></figure></p>

<p>Next, we'll add some validations in app/models/employee.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>class Employee &lt; ActiveRecord::Base
</div><div class='line'>  # regex taken from Devise gem
</div><div class='line'>  validates_format_of :email, with: /\A[<sup>@\s]+@([<sup>@\s]+.)+[<sup>@\s]+\z/</sup></sup></sup>
</div><div class='line'>  validates_format_of :ssn, with: /\d{3}-\d{2}-\d{4}/
</div><div class='line'>  validates_presence_of :name
</div><div class='line'>  validates :salary, numericality: { only_integer: true }
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<p>Before creating the API interface for Angular, let's create a serializer for our Employee model.  This will allow our API to expose only those fields that are necessary to Angular frontend. Add ActiveModel Serializers to the Gemfile</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>gem 'active_model_serializers'</div></pre></td></tr></table></div></figure></p>

<p>And <code>bundle install</code></p>

<h2>Create the Employee API</h2>

<p>In order to support the Angular frontend, we'll need to create an API controller at app/controllers/api/employees_controller.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>class Api::EmployeesController &lt; ApplicationController
</div><div class='line'>  respond_to :json
</div><div class='line'> </div><div class='line'>  def index
</div><div class='line'>    serialized_employees =
</div><div class='line'>      ActiveModel::ArraySerializer
</div><div class='line'>               .new(Employee.all, each_serializer: EmployeeSerializer)
</div><div class='line'> </div><div class='line'>    render json: serialized_employees
</div><div class='line'>  end
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<p>Now we need to define that EmployeeSerializer in app/serializers/employee_serializer.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>class EmployeeSerializer &lt; ActiveModel::Serializer
</div><div class='line'>  attributes :id, :name, :email, :ssn, :salary
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<p>And expose this API to the frontend in config/routes.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>Rails.application.routes.draw do
</div><div class='line'>  get 'example' => 'example#index'
</div><div class='line'> </div><div class='line'>  namespace :api do
</div><div class='line'>    resources :employees, defaults: { format: :json }
</div><div class='line'>  end
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<p>Finally we'll add some Employee data to db/seeds.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>Employee.create(name: "MacGyver", email: "test@example.com", ssn: "555-55-5555", salary: 50000)
</div><div class='line'>Employee.create(name: "Calhoun Tubbs", email: "test2@example.com", ssn: "123-45-6789", salary: 60000)</div></pre></td></tr></table></div></figure></p>

<p>Seed the database and start the Rails server:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>bundle exec rake db:seed
</div><div class='line'>rails s</div></pre></td></tr></table></div></figure></p>

<p>Then we can open http://localhost:3000/api/employees in the browser which will return:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div><div data-line='12' class='line-number'></div><div data-line='13' class='line-number'></div><div data-line='14' class='line-number'></div><div data-line='15' class='line-number'></div><div data-line='16' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>[
</div><div class='line'>  {
</div><div class='line'>    "id": 1,
</div><div class='line'>    "name": "MacGyver",
</div><div class='line'>    "email": "test@example.com",
</div><div class='line'>    "ssn": "555-55-5555",
</div><div class='line'>    "salary": 50000
</div><div class='line'>  },
</div><div class='line'>  {
</div><div class='line'>    "id": 2,
</div><div class='line'>    "name": "Calhoun Tubbs",
</div><div class='line'>    "email": "test2@example.com",
</div><div class='line'>    "ssn": "123-45-6789",
</div><div class='line'>    "salary": 60000
</div><div class='line'>  }
</div><div class='line'>]</div></pre></td></tr></table></div></figure></p>

<h2>Test the API</h2>

<p>Now that we've verified this action is set-up correctly, let's add a factory at spec/factories/employees.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>FactoryGirl.define do
</div><div class='line'>  factory :employee do
</div><div class='line'>    name 'Test Employee'
</div><div class='line'>    email 'test@example.com'
</div><div class='line'>    salary 50000
</div><div class='line'>    ssn '123-45-6789'
</div><div class='line'>  end
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<p>Next, add a test at spec/controllers/api/employees_controller_spec.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div><div data-line='12' class='line-number'></div><div data-line='13' class='line-number'></div><div data-line='14' class='line-number'></div><div data-line='15' class='line-number'></div><div data-line='16' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>require 'spec_helper'
</div><div class='line'> </div><div class='line'>describe Api::EmployeesController do
</div><div class='line'>  before(:each) do
</div><div class='line'>    create(:employee, name: 'Calhoun Tubbs')
</div><div class='line'>  end
</div><div class='line'> </div><div class='line'>  describe '#index' do
</div><div class='line'>    it 'should return a json array of users' do
</div><div class='line'>      get :index
</div><div class='line'>      result = JSON.parse(response.body)
</div><div class='line'> </div><div class='line'>      expect(result[0]['name']).to eq('Calhoun Tubbs')
</div><div class='line'>    end
</div><div class='line'>  end
</div><div class='line'>end</div></pre></td></tr></table></div></figure></p>

<p>While the above test is somewhat trivial, this set up is great for verifying more complex logic in real world applications. In addition, the reason for adding an API spec prior to the Angular portion is to avoid playing the guessing game if/when problems arise; waiting to add the Angular framework helps to ease the deciphering process. If your Angular app isn't working correctly, its important to verify that the Rails backend is also behaving correctly -- the problem may not be an Angular issue.</p>

<h2>Create the Angular frontend</h2>

<p>You may want to take a look back at <a href="http://www.intridea.com/blog/2014/9/25/how-to-set-up-angular-with-rails">Part 1: How to Set Up Angular with Rails</a> to review how we setup the AngularJS frontend with Rails. Let's start by defining an app in app/assets/javascripts/angular-app/modules/employee.js.coffee.erb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>@employeeApp = angular
</div><div class='line'>  .module('app.employeeApp', [
</div><div class='line'>    'restangular'
</div><div class='line'>  ])
</div><div class='line'>  .run(->
</div><div class='line'>    console.log 'employeeApp running'
</div><div class='line'>  )</div></pre></td></tr></table></div></figure></p>

<p>Next, we'll define the Employees controller in app/controllers/employees.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>bundle exec rails g controller Employees index</div></pre></td></tr></table></div></figure></p>

<p>Then, we'll add to the beginning of config/routes.rb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>root 'employees#index'</div></pre></td></tr></table></div></figure></p>

<p>Finally, let's start the Angular app in app/views/employees/index.html.erb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>&lt;div ng-app='app.employeeApp' ng-controller='EmployeeListCtrl'>
</div><div class='line'>&lt;/div></div></pre></td></tr></table></div></figure></p>

<p>If you run the Rails server and hit http://localhost:3000/ you'll get an error about the controller not being defined yet in the javascript console. Before we create the controller, let's setup a Employee model and service to handle fetching Employee records from the Rails API.</p>

<p>The Employee model is defined at app/assets/javascripts/angular-app/models/employee/Employee.js.coffee:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>angular.module('app.employeeApp').factory('Employee',[() ->
</div><div class='line'>  Employee = () ->
</div><div class='line'> </div><div class='line'>  return new Employee()
</div><div class='line'>])</div></pre></td></tr></table></div></figure></p>

<p>There is no special behavior here yet.  It is only returning the data that comes from the API.</p>

<p>To ease the process of working with APIs in Angular, let's add the restangular library to our project. In bower.json add restangular:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>  "lib": {
</div><div class='line'>    "name": "bower-rails generated lib assets",
</div><div class='line'>    "dependencies": {
</div><div class='line'>      "angular": "v1.2.25",
</div><div class='line'>      "restangular": "v1.4.0"
</div><div class='line'>    }
</div><div class='line'>  },</div></pre></td></tr></table></div></figure></p>

<p>Then run <code>bundle exec rake bower:install</code>. Next, we need to add restangular and its dependency lodash to app/assets/javascripts/application.js:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>//= require jquery
</div><div class='line'>//= require jquery_ujs
</div><div class='line'>//= require angular
</div><div class='line'>//= require angular-rails-templates
</div><div class='line'>//= require lodash
</div><div class='line'>//= require restangular</div></pre></td></tr></table></div></figure></p>

<p>Afterwards, we'll create the Employee service at app/assets/javascripts/angular-app/services/employee/EmployeeService.js.coffee:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div><div data-line='12' class='line-number'></div><div data-line='13' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>angular.module('app.employeeApp')
</div><div class='line'>  .factory('EmployeeService', [
</div><div class='line'>    'Restangular', 'Employee',
</div><div class='line'>    (Restangular, Employee)->
</div><div class='line'> </div><div class='line'>      model = 'employees'
</div><div class='line'> </div><div class='line'>      Restangular.extendModel(model, (obj)->
</div><div class='line'>        angular.extend(obj, Employee)
</div><div class='line'>      )
</div><div class='line'> </div><div class='line'>      list: ()     -> Restangular.all(model).getList()
</div><div class='line'>  ])</div></pre></td></tr></table></div></figure></p>

<p>Finally, let's create the controller at app/assets/javascripts/angular-app/controllers/employee/EmployeeListCtrl.js.coffee:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>angular.module('app.employeeApp').controller("EmployeeListCtrl", [
</div><div class='line'>  '$scope', 'EmployeeService',
</div><div class='line'>  ($scope, EmployeeService)->
</div><div class='line'> </div><div class='line'>    EmployeeService.list().then((employees) ->
</div><div class='line'>      $scope.employees = employees
</div><div class='line'>      console.dir employees
</div><div class='line'>    )
</div><div class='line'>])</div></pre></td></tr></table></div></figure></p>

<p>If you run the Rails server and visit http://localhost:3000/ in the javascript console you'll see a print out of the Employee objects previously seeded to the database.  Next, let's add to the template code to show our Employee objects.  In app/views/employees/index.html.erb:</p>

<p><figure class='code'><div class='highlight'><table><td class='line-numbers' aria-hidden='true'><pre><div data-line='1' class='line-number'></div><div data-line='2' class='line-number'></div><div data-line='3' class='line-number'></div><div data-line='4' class='line-number'></div><div data-line='5' class='line-number'></div><div data-line='6' class='line-number'></div><div data-line='7' class='line-number'></div><div data-line='8' class='line-number'></div><div data-line='9' class='line-number'></div><div data-line='10' class='line-number'></div><div data-line='11' class='line-number'></div><div data-line='12' class='line-number'></div><div data-line='13' class='line-number'></div><div data-line='14' class='line-number'></div><div data-line='15' class='line-number'></div><div data-line='16' class='line-number'></div><div data-line='17' class='line-number'></div><div data-line='18' class='line-number'></div></pre></td><td class='main  plain'><pre><div class='line'>&lt;div ng-app='app.employeeApp' ng-controller='EmployeeListCtrl'>
</div><div class='line'>  &lt;table ng-if="employees">
</div><div class='line'>    &lt;thead>
</div><div class='line'>      &lt;th>Name&lt;/th>
</div><div class='line'>      &lt;th>Email&lt;/th>
</div><div class='line'>      &lt;th>SSN&lt;/th>
</div><div class='line'>      &lt;th>Salary&lt;/th>
</div><div class='line'>    &lt;/thead>
</div><div class='line'>    &lt;tbody>
</div><div class='line'>      &lt;tr ng-repeat="employee in employees">
</div><div class='line'>        &lt;td>&lt;/td>
</div><div class='line'>        &lt;td>&lt;/td>
</div><div class='line'>        &lt;td>&lt;/td>
</div><div class='line'>        &lt;td>&lt;/td>
</div><div class='line'>      &lt;/tr>
</div><div class='line'>    &lt;/tbody>
</div><div class='line'>  &lt;/table>
</div><div class='line'>&lt;/div></div></pre></td></tr></table></div></figure></p>

<p>Open http://localhost:3000 and notice the salary field. We used the currency filter to handle formatting that data. Salary comes back from the API as a plain integer value. Angular has a number of useful filters that are included by default.</p>

<p>The above example is very basic. However, we created database objects, exposed those via an API, tested the API, and created an Angular app to handle the frontend. That's no small task! A few pieces are still missing though.  While our Ruby API has tests, our Angular app has no tests at all. Furthermore, our employee management app is view-only.</p>

<p><strong>Github code for HR app <a href="https://github.com/rawsyntax/rails-angular-api-example">here</a></strong>.</p>

<p>In Part 3, we'll setup javascript tests, and add editing functionality to our Angular frontend.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Eric Himmelreich</span></span>










  


<time datetime="2014-11-04T09:51:14-05:00" pubdate data-updated="true">Nov 4<span>th</span>, 2014</time>


<span class="categories">
  
    <a class='category' href='/blog/categories/angularjs/'>angularjs</a>, <a class='category' href='/blog/categories/programming/'>programming</a>
  
</span>



      

    </p>
    
      <div class="sharing">
  
    
      <a href="http://twitter.com/share" title="Tweet this" class="twitter-share" target="_blank">Tweet</a>
    
  
  
    
      <a title="+1 on Google Plus" class="googleplus-share" href="https://plusone.google.com/_/+1/confirm?hl=en&url=http://rawsyntax.com/blog/how-to-set-up-angular-with-rails-part-2/" target="_blank">+1</a>
    
  
  
  

</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/how-to-set-up-angular-with-rails/" title="Previous Post: How to Set Up Angular With Rails">&laquo; How to Set Up Angular With Rails</a>
      
      
        <a class="basic-alignment right" href="/blog/k750-a-solid-wireless-keyboard/" title="Next Post: K750: a Solid Wireless Keyboard">K750: a Solid Wireless Keyboard &raquo;</a>
      
    </p>
  </footer>
</article>

<section>
  <h1>Comments</h1>
  

  
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  
</section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/comparing-plist-files-on-osx/">Comparing plist files on OSX</a>
      </li>
    
      <li class="post">
        <a href="/blog/rspec-suite-runs-twice/">RSpec Suite Runs Twice?</a>
      </li>
    
      <li class="post">
        <a href="/blog/on-api-security/">On API Security</a>
      </li>
    
      <li class="post">
        <a href="/blog/how-to-set-up-angular-with-rails-part-3/">How to Set Up Angular with Rails Part 3</a>
      </li>
    
      <li class="post">
        <a href="/blog/k750-a-solid-wireless-keyboard/">K750: a Solid Wireless Keyboard</a>
      </li>
    
  </ul>
</section>


<section>
  <h1>On GitHub</h1>
  <ul id="gh_repos" data-user="rawsyntax" data-count="5" data-skip="true">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a class="github-follow" href="https://github.com/rawsyntax">Follow @rawsyntax</a>
  
</section>









  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Eric Himmelreich -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'rawsyntax';
			var disqus_developer = '0';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://rawsyntax.com/blog/how-to-set-up-angular-with-rails-part-2/';
        var disqus_url = 'http://rawsyntax.com/blog/how-to-set-up-angular-with-rails-part-2/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






</body>
</html>
